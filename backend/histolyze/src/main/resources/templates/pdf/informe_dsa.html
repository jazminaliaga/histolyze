<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <style>
        @page { size: A4; margin: 2cm; }
        body { font-family: Helvetica, Arial, sans-serif; font-size: 11px; line-height: 1.3; color: #000; }
        .header-table { width: 100%; margin-bottom: 20px; }
        .header-table td { padding: 3px; font-weight: bold; }
        .title { text-align: center; font-weight: bold; font-size: 14px; margin-bottom: 10px; text-decoration: underline; }
        .section-text { margin-bottom: 10px; text-align: justify; }

        /* Tablas de resultados lado a lado */
        .results-container { width: 100%; display: table; margin-top: 15px; }
        .col-half { display: table-cell; width: 48%; vertical-align: top; padding-right: 2%; }

        .result-table { width: 100%; border-collapse: collapse; margin-bottom: 10px; }
        .result-table th { background-color: #f0f0f0; border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; }
        .result-table td { border: 1px solid #000; padding: 4px; text-align: center; font-size: 10px; }

        .footer-note { margin-top: 30px; border-top: 1px solid #000; padding-top: 10px; font-style: italic; }
    </style>
</head>
<body>

<table class="header-table">
    <tr>
        <td>Paciente: <span th:text="${datos.nombre}">Juan Perez</span></td>
    </tr>
    <tr>
        <td>DNI: <span th:text="${datos.dni}">12345678</span></td>
    </tr>
    <tr>
        <td>Nº de muestra: <span th:text="${datos.muestra}">M-2025-001</span></td>
    </tr>
    <tr>
        <td>Médico solicitante: <span th:text="${datos.medico}">Dr. Ejemplo</span></td>
    </tr>
    <tr>
        <td>Fecha de muestra: <span th:text="${#temporals.format(datos.fechaMuestra, 'dd/MM/yyyy')}">01/01/2025</span></td>
    </tr>
</table>

<div class="title">ESPECIFICIDAD DE ANTICUERPOS anti-HLA CLASE I y II</div>

<div class="section-text">
    <strong>Método:</strong> Detección de anticuerpos específicos anti HLA I y II contra microesferas recubiertas con moléculas HLA de antígeno único recombinante por tecnología LUMINEX con reactivos ONE LAMBDA.
</div>
<div class="section-text">
    Según los valores de referencia del kit utilizado, se consideran positivos aquellos anticuerpos con índice de fluorescencia (MFI) mayor a 1000.
</div>

<div class="results-container">
    <div class="col-half">
        <div style="font-weight: bold; text-align: center; margin-bottom: 5px;">ANTICUERPOS ANTI-HLA Clase I</div>
        <table class="result-table">
            <thead>
            <tr>
                <th>Serológico</th>
                <th>Alélico</th>
                <th>MFI</th>
                <th>Resultado</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="dsa : ${resultadosClaseI}">
                <td th:text="${dsa.serologico}"></td>
                <td th:text="${dsa.alelico}"></td>
                <td th:text="${dsa.mfi}"></td>
                <td th:text="${dsa.resultado}"></td>
            </tr>
            <tr th:if="${#lists.isEmpty(resultadosClaseI)}">
                <td colspan="4">&nbsp;</td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="col-half" style="padding-right: 0; padding-left: 2%;">
        <div style="font-weight: bold; text-align: center; margin-bottom: 5px;">ANTICUERPOS ANTI-HLA Clase II</div>
        <table class="result-table">
            <thead>
            <tr>
                <th>Serológico</th>
                <th>Alélico</th>
                <th>MFI</th>
                <th>Resultado</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="dsa : ${resultadosClaseII}">
                <td th:text="${dsa.serologico}"></td>
                <td th:text="${dsa.alelico}"></td>
                <td th:text="${dsa.mfi}"></td>
                <td th:text="${dsa.resultado}"></td>
            </tr>
            <tr th:if="${#lists.isEmpty(resultadosClaseII)}">
                <td colspan="4">&nbsp;</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="footer-note">
    <p><strong>NOTA:</strong> <span th:text="${observaciones}">El paciente no presenta potenciales DSA...</span></p>
</div>

</body>
</html>